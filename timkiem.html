<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/grid.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/fontawesome-free-6.2.1-web/css/all.min.css">
    <link rel="shortcut icon" href="./assets/css/img/Logo.png" type="image/x-icon">
    <title>NeccesMarket</title>
</head>
<body style="background-color:  #e9edf0;">
    <header class="header">
        <div class="grid wide">
            <nav class="header__nav">
                <ul class="header__nav-list">
                    <li class="header__nav-item">
                        <a href="" class="header__nav-item--link">
                            Trang chủ
                        </a>
                    </li>
                    <li class="header__nav-item header__nav-item--separate">
                        <span class="header__nav-item--link">Kết nối</span>
                        <label class="header__nav-item--link"  for="header-checkbox__facebook">
                            <i class="fa-brands fa-facebook"></i>
                        </label>
                        <label class="header__nav-item--link" for="header-checkbox__instagram">
                            <i class="fa-brands fa-instagram"></i>
                        </label>
                    </li>
                </ul>
                <ul class="header__nav-list">
                    <li class="header__nav-item header__nav-item--link-notify">
                        <a href="" class="header__nav-item--link">
                            <i class="fa-regular fa-bell bell-icon"></i>
                            Thông báo
                        </a>
                        <div class="Item__notifi">
                            <h2 class="Item__notifi-label">Thông báo</h2>
                            <ul class="Item__notifi-list">
                                <li class="Item__notifi-item Item__notifi-item--active">
                                    <a href="#" class="Item__notifi-link">
                                        <div class="Item__notifi-header">
                                            <img src="./assets/css/img/mienphi-vanchuyen-1.jpg" alt="" class="Item__notifi-img">
                                        </div>
                                        <div class="Item__notifi-body">
                                            <h3 class="Item__notifi-body-label">Mã miễn phí vận chuyển sắp hết hạn</h3>
                                            <span class="Item__notifi-body-content">Hiệu lực: 0:00 4/1/2023 - 23:59 7/1/2023</span>
                                        </div>
                                    </a>
                                </li>
                                <li class="Item__notifi-item">
                                    <a href="" class="Item__notifi-link">
                                        <div class="Item__notifi-header">
                                            <img src="./assets/css/img/mienphi-vanchuyen-1.jpg" alt="" class="Item__notifi-img">
                                        </div>
                                        <div class="Item__notifi-body">
                                            <h3 class="Item__notifi-body-label">Mã miễn phí vận chuyển sắp hết hạn</h3>
                                            <span class="Item__notifi-body-content">Hiệu lực: 0:00 4/1/2023 - 23:59 7/1/2023</span>
                                        </div>
                                    </a>
                                </li>
                                <li class="Item__notifi-item Item__notifi-item--active">
                                    <a href="#" class="Item__notifi-link">
                                        <div class="Item__notifi-header">
                                            <img src="./assets/css/img/Khuyến-mãi-Giảm-giá.jpg" alt="" class="Item__notifi-img">
                                        </div>
                                        <div class="Item__notifi-body">
                                            <h3 class="Item__notifi-body-label">Săn ngay mã sale cực khủng!!!</h3>
                                            <span class="Item__notifi-body-content">Mã giảm giá 50% với các đơn trên 2.000.000đ đang được săn đón. Săn ngay thôi!</span>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                            <div class="Item__notifi-bottom">
                                <a href="#" class="Item__notifi-bottom-link">
                                    Xem tất cả
                                </a>
                            </div>
                        </div>
                    </li>
                    <li class="header__nav-item">
                        <label for="header-checkbox__register" class="header__nav-item--link">
                            Đăng ký
                        </label>
                    </li>
                    <li class="header__nav-item">
                        <label for="header-checkbox__login" class="header__nav-item--link">
                            Đăng nhập
                        </label>
                    </li>
                </ul>
            </nav>
            <div class="header-with-search">
                <div class="logo">
                    <a href="Trangchu.html" class="logo-link">
                        <img class="image" src="./assets/css/img/Logo.png" alt="">
                    </a>
                </div>
                <form class="search" action="timkiem.html" onsubmit="return search()">
                    <div class="search-find" >
                        <input type="text" placeholder="Tìm kiếm" class="search-find-input">
                    </div>
                    <button type="submit" class="search-btn">
                        <i class="fa-sharp fa-solid fa-magnifying-glass"></i>
                    </button>
                </form>
                <div class="shopping-cart-icon">
                    <a href="giohang.html" class="shopping-cart-icon-link">
                        <i class="fa-sharp fa-solid fa-cart-shopping"></i>
                    </a>
                </div>
            </div>   
        </div>
    </header>
    <div class="main">
        <div class="grid wide">
            <div class="row container">
                <div class="col l-3">
                    <nav class="menu">
                        <span><i class="fa-solid fa-bars"></i>Danh mục sản phẩm</span>
                        <ul class="items">
                            <li class="item">
                                <div class="item-parent">THỊT, CÁ, TRỨNG, HẢI SẢN 
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Thịt các loại</a>
                                    <a class="item-child" href="#">Cá các loại</a>
                                    <a class="item-child" href="#">Trứng gà</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">DẦU ĂN, NƯỚC CHẤM, GIA VỊ
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Dầu Ăn</a>
                                    <a class="item-child" href="#">Nước Chấm</a>
                                    <a class="item-child" href="#">Gia Vị</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">RAU, CỦ, NẤM, TRÁI CÂY
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Rau</a>
                                    <a class="item-child" href="#">Trái Cây</a>
                                    <a class="item-child" href="#">Thực Vật Thô</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">KEM, THỰC PHẨM ĐÔNG MÁT
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Kem</a>
                                    <a class="item-child" href="#">THỰC PHẨM ĐÔNG MÁT</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">GẠO, BỘT, ĐỒ KHÔ
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Gạo</a>
                                    <a class="item-child" href="#">Bột</a>
                                    <a class="item-child" href="#">Đồ Khô</a>
                                </div>
                            </li>
                            <li class="item">
                            <li class="item">
                                <div class="item-parent">MÌ, MIẾN, CHÁO, PHỞ 
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Mì</a>
                                    <a class="item-child" href="#">Cháo</a>
                                    <a class="item-child" href="#">Phở</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">BIA, NƯỚC GIẢI KHÁT
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Bia</a>
                                    <a class="item-child" href="#">Nước Giải Khát </a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">SỮA CÁC LOẠI
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Sửa Có Đường</a>
                                    <a class="item-child" href="#">Sửa Ăn Khiêng </a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">SẢN PHẨM CHO MẸ VÀ BÉ
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Dành Cho Mẹ</a>
                                    <a class="item-child" href="#">Dành Cho Bé</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">CHĂM SÓC THÚ CƯNG
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Phụ Kiện</a>
                                    <a class="item-child" href="#">Thức Ăn</a>
                                    <a class="item-child" href="#">Dịch Vụ</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">CHĂM SÓC CÁ NHÂN
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Dụng Cụ Vệ Sinh</a>
                                    <a class="item-child" href="#">Các Sản Phẩm Y Tế</a>
                                    <a class="item-child" href="#">Sơ Cứu</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">BÁNH KẸO CÁC LOẠI
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Có Đường</a>
                                    <a class="item-child" href="#">Ăn Khiêng</a>
                                    <a class="item-child" href="#">Không đường</a>
                                </div>
                            </li>
                            <li class="item">
                                <div class="item-parent">ĐỒ DÙNG GIA ĐÌNH
                                    <div class="icon-open"><span class="fas fa-caret-down"></span></div>
                                    <div class="hidden icon-close"><span class="fas fa-caret-up"></span></div>
                                </div>
                                <div class="items-child">
                                    <a class="item-child" href="#">Bàn</a>
                                    <a class="item-child" href="#">Ghế</a>
                                    <a class="item-child" href="#">Tủ</a>
                                </div>
                            </li>
                            
                        </ul>
                    </nav>
                </div>
                <div class="col l-9">

                </div>
               
            </div>
            
        </div>
    </div>
    <input hidden type="checkbox" id="header-checkbox__facebook" class="header-checkface">
        <input hidden type="checkbox" id="header-checkbox__instagram" class="header-checkins">
        <input hidden type="checkbox" id="header-checkbox__register" class="header-checkreg">
        <input hidden type="checkbox" id="header-checkbox__login" class="header-checklog">
        <div class="modal-facebook">
            <div class="modal-container">
                <header class="modal-container__header-facebook">
                    <h1 class="modal-container__header-label-face">
                        <span class="modal-container__header-label">Facebook</span>
                    </h1>
                    <label for="header-checkbox__facebook" class="modal-container__header-icon">
                        <i class="fa-solid fa-xmark"></i>
                    </label>
                </header>
                <div class="modal-container__body">
                    <div class="modal-container__body-input">
                        <h2 class="input-gmail__label">Email:</h2>
                        <input type="text" placeholder="Nhập email">
                    </div>
                    <div class="modal-container__body-input">
                        <h2 class="input-password__label">Password:</h2>
                        <input type="password" placeholder="Nhập password">
                    </div>
                    <button  class="modal-container__body-btn">Đăng nhập</button>
                </div>
            </div>
        </div>
        <div class="modal-instagram">
            <div class="modal-container">
                <header class="modal-container__header-instagram">
                    <h1 class="modal-container__header-label-ins">Instagram</h1>
                    <label for="header-checkbox__instagram" class="modal-container__header-icon">
                        <i class="fa-solid fa-xmark"></i>
                    </label>
                </header>
                <div class="modal-container__body">
                    <div class="modal-container__body-input">
                        <h2 class="input-gmail__label">Email:</h2>
                        <input type="text" placeholder="Phone number or email">
                    </div>
                    <div class="modal-container__body-input">
                        <h2 class="input-password__label">Password:</h2>
                        <input type="password" placeholder="Password">
                    </div>
                    <button class="modal-container__body-btn2">Đăng nhập</button>
                </div>
            </div>
        </div>
        <div class="modal-register">
            <div class="modal-container-register">
                <header class="modal-container__header-register">
                    <h1 class="modal-container__header-label-register">Đăng ký</h1>
                    <label for="header-checkbox__register" class="modal-container__header-icon">
                        <i class="fa-solid fa-xmark"></i>
                    </label>
                </header>
                <div class="modal-container__body-register">
                    <div class="modal-container__body-input-info">
                        <div class="body-input-name">
                            <input type="text" placeholder="Họ và tên">
                        </div>
                        <div class="body-input-address">
                            <input type="text" placeholder="Địa chỉ">
                        </div>
                    </div>
                    <div class="body-input-phone">
                        <input type="text" placeholder="Phone number">
                    </div>
                    <div class="body-input-passwd">
                        <input type="password" placeholder="Mật khẩu">
                    </div>
                    <div class="body-input-repasswd">
                        <input type="password" placeholder="Nhập lại mật khẩu">
                    </div>
                    <button class="modal-container__body-btn3">Đăng ký</button>
                </div>
            </div>
        </div>
        <div class="modal-login">
            <div class="modal-container">
                <header class="modal-container__header-login">
                    <h1 class="modal-container__header-label-login">Đăng nhập</h1>
                    <label for="header-checkbox__login" class="modal-container__header-icon">
                        <i class="fa-solid fa-xmark"></i>
                    </label>
                </header>
                <div class="modal-container__body">
                    <div class="modal-container__body-input">
                        <h2 class="input-gmail__label-login">Email/Số điện thoại:</h2>
                        <input type="text" placeholder="Nhập email/số điện thoại">
                    </div>
                    <div class="modal-container__body-input">
                        <h2 class="input-password__label-login">Password:</h2>
                        <input type="password" placeholder="Nhập password">
                    </div>
                    <button class="modal-container__body-btn4">Đăng nhập</button>
                </div>
            </div>
        </div>
    
    <script type="text/javascript" >
        
        var Products= JSON.parse(localStorage.getItem("Products"));
        console.log(Products)
        const params = new URLSearchParams(window.location.search);
        var searchTxt = params.get('search')
        document.querySelector('.search-find-input').value=searchTxt
        console.log(searchTxt)
        var filteredProducts = Products.filter(product =>
            product.name.toLowerCase().includes(searchTxt)
        );
        console.log(filteredProducts)

        var page = parseInt(params.get('page'))
        var Products= JSON.parse(localStorage.getItem("Products"));
        var item=''
        var row =''
        var container=''
        var pageNumber = ''

        if(isNaN(page)){
            page=1
        }
    
        var tmp1= (page-1)*16
        var tmp2=  tmp1+4 

        for(var i=0;i<4;i++){
            for(var j=tmp1;j<tmp2;j++){
                if(j >= filteredProducts.length ){
                    break;
                }   
                item += '<div class="col l-3 product-item">'+
                                    '<a href="sanpham.html?idP='+filteredProducts[j].id+'" class="product-item__link">'+
                                        '<div class="product-item__header" style="background-image: url('+filteredProducts[j].img+');">'+
                                        '</div>'+
                                        '<div class="product-item__body">'+
                                            '<p class="product-item__label">'+filteredProducts[j].name+'</p>'+
                                            '<div class="product-item__price">'+(filteredProducts[j].price*1).toLocaleString("vi")+' <span>đ</span></div>' +
                                        '</div>'+
                                    '</a>'+
                                    '<button class="product-item__btn" onclick="addToCart(this)">Mua liền</button>'+         
                                '</div>'
                                
            }
            tmp1=tmp2;
            tmp2+=4;
            row =   '<div class="row col-margin">'+
                    item+
                    '</div>' 
            container += row 
            item=''
            row=''
        }
        for(var k=0;k<Math.floor(filteredProducts.length/16)+1;k++){
            pageNumber += '<a href="timkiem.html?page='+(k+1)+'&search='+searchTxt+'" class="page">'+(k+1)+'</a>'
        }
        var pagination = '<div class="pagination">'+pageNumber+'</div>'

        document.querySelector('.l-9').innerHTML=container + pagination

        var arrPageNumber = document.querySelectorAll('.page')

        arrPageNumber[page-1].classList.add('active')


    

///Thêm giỏ hàng
var giohang;
const giohangcu= JSON.parse(localStorage.getItem("cart"));

if(!giohangcu){
    giohang = new Array()  
}else{
    giohang = [...giohangcu]
}

function addToCart(x){
    var checkSP = 0;
    const product = x.parentElement.children[0];
    const img = product.children[0];
    style = img.currentStyle || window.getComputedStyle(img, false);
    urlImg = style.backgroundImage.slice(4, -1).replace(/"/g, "");
    const name = product.children[1].children[0].innerText;
    const price0 = product.children[1].children[1].innerText;
    const price1=price0.slice(0, price0.lastIndexOf("đ"));
    const sp = new Object();
    sp.img = urlImg;
    sp.name= name;
    sp.price = price1; 
    sp.quantity = 1;
    for(let i = 0;i<giohang.length;i++){
        if(sp.name == giohang[i].name){
            checkSP = 1;
            giohang[i].quantity=giohang[i].quantity+1;
            console.log(giohang[i].quantity);
            break;
        }
    }
    if(checkSP==0){
        giohang.push(sp);
    }
        
    localStorage.setItem("cart",JSON.stringify(giohang));
    
}
        
        function search(){
            var input = document.querySelector('.search-find-input').value.trim().toLowerCase()
            if(input==''){
                alert("Vui lòng nhập thông tin tìm kiếm!!!")
                return false;
            }else{
                window.location.href = "timkiem.html?search=" +  encodeURIComponent(input)
            }
            return false
        }
        
    </script>

</body>
</html>